<app-app-layout [showBackground]="true">
  <div class="flex flex-1 items-center justify-center px-6 py-12">
    <div class="w-full max-w-md">
      <!-- Card Container -->
      <div class="animate-fade-in-scale rounded-xl border border-border/40 bg-card/80 backdrop-blur-sm p-8 md:p-10 shadow-[0_0_60px_-15px_rgba(0,0,0,0.1)]">
        <!-- Header -->
        <div class="mb-8 animate-fade-in" [style.animation-delay]="'0.1s'">
          <h1 class="text-heading-1 text-foreground">OTP Generator</h1>
          <p class="mt-3 text-body text-text-secondary">
            Generate a time-bound one-time password
          </p>
        </div>

        <!-- Animated Divider -->
        <div class="mb-8 h-px w-full bg-border/50 animate-shimmer"></div>

        <!-- Form -->
        <div class="space-y-6">
          <!-- OTP Length Select -->
          <div class="space-y-2 animate-fade-in" [style.animation-delay]="'0.2s'">
            <label class="text-caption uppercase text-text-tertiary">
              OTP Length
            </label>
            <app-select
              [value]="selectedLength"
              [options]="[
                { value: '3', label: '3 Digits' },
                { value: '6', label: '6 Digits' }
              ]"
              placeholder="Select length"
              (valueChange)="onLengthChange($event)"
            ></app-select>
          </div>

          <!-- Generate Button - FIXED: Always black text, grey background, black on hover -->
          <div class="animate-fade-in" [style.animation-delay]="'0.3s'">
            <app-button
              (onClick)="generateOtp()"
              [disabled]="!isValid || (isGenerating$ | async)"
              variant="default"
              size="lg"
              class="h-12 w-full text-body font-medium transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-40 disabled:hover:scale-100 group"
            >
              @if (isGenerating$ | async) {
                <div class="mr-2 h-4 w-4 animate-spin rounded-full border-2 border-background/30 border-t-background"></div>
                Generating OTPâ€¦
              } @else {
                <svg class="mr-2 h-4 w-4 transition-transform duration-300 group-hover:rotate-12" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path>
                </svg>
                Generate OTP
              }
            </app-button>
          </div>
        </div>
      </div>

      <!-- Helper text -->
      <p class="mt-6 text-center text-body-small text-text-tertiary animate-fade-in" [style.animation-delay]="'0.4s'">
        OTP will expire in 30 seconds
      </p>

      <!-- Decorative elements -->
      <div class="mt-8 flex justify-center gap-2 animate-fade-in" [style.animation-delay]="'0.5s'">
        <div class="h-1.5 w-1.5 rounded-full bg-foreground/20 animate-dot-pulse" [style.animation-delay]="'0s'"></div>
        <div class="h-1.5 w-1.5 rounded-full bg-foreground/20 animate-dot-pulse" [style.animation-delay]="'0.2s'"></div>
        <div class="h-1.5 w-1.5 rounded-full bg-foreground/20 animate-dot-pulse" [style.animation-delay]="'0.4s'"></div>
      </div>
    </div>
  </div>
</app-app-layout>
